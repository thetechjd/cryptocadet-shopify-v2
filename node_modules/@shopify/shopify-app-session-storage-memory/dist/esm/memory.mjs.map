{"version":3,"file":"memory.mjs","sources":["../../../src/memory.ts"],"sourcesContent":["import {Session} from '@shopify/shopify-api';\nimport {SessionStorage} from '@shopify/shopify-app-session-storage';\n\nexport class MemorySessionStorage implements SessionStorage {\n  private sessions: Record<string, Session> = {};\n\n  public async storeSession(session: Session): Promise<boolean> {\n    this.sessions[session.id] = session;\n    return true;\n  }\n\n  public async loadSession(id: string): Promise<Session | undefined> {\n    return this.sessions[id] || undefined;\n  }\n\n  public async deleteSession(id: string): Promise<boolean> {\n    if (this.sessions[id]) {\n      delete this.sessions[id];\n    }\n    return true;\n  }\n\n  public async deleteSessions(ids: string[]): Promise<boolean> {\n    ids.forEach((id) => delete this.sessions[id]);\n    return true;\n  }\n\n  public async findSessionsByShop(shop: string): Promise<Session[]> {\n    const results = Object.values(this.sessions).filter(\n      (session) => session.shop === shop,\n    );\n    return results;\n  }\n}\n"],"names":[],"mappings":"MAGa,oBAAoB,CAAA;IACvB,QAAQ,GAA4B,EAAE;IAEvC,MAAM,YAAY,CAAC,OAAgB,EAAA;QACxC,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,EAAE,CAAC,GAAG,OAAO;AACnC,QAAA,OAAO,IAAI;IACb;IAEO,MAAM,WAAW,CAAC,EAAU,EAAA;QACjC,OAAO,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,IAAI,SAAS;IACvC;IAEO,MAAM,aAAa,CAAC,EAAU,EAAA;AACnC,QAAA,IAAI,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,EAAE;AACrB,YAAA,OAAO,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAC;QAC1B;AACA,QAAA,OAAO,IAAI;IACb;IAEO,MAAM,cAAc,CAAC,GAAa,EAAA;AACvC,QAAA,GAAG,CAAC,OAAO,CAAC,CAAC,EAAE,KAAK,OAAO,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;AAC7C,QAAA,OAAO,IAAI;IACb;IAEO,MAAM,kBAAkB,CAAC,IAAY,EAAA;QAC1C,MAAM,OAAO,GAAG,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,MAAM,CACjD,CAAC,OAAO,KAAK,OAAO,CAAC,IAAI,KAAK,IAAI,CACnC;AACD,QAAA,OAAO,OAAO;IAChB;AACD;;;;"}